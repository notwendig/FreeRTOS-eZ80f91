 src/genlz77.c  | 2 +-
 src/tinflate.c | 5 +++--
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/src/genlz77.c b/src/genlz77.c
index ede1fc9..4bf07ae 100644
--- a/src/genlz77.c
+++ b/src/genlz77.c
@@ -104,9 +104,9 @@ void uzlib_compress(struct uzlib_comp *data, const uint8_t *src, unsigned slen)
         const uint8_t *subs = *bucket;
         *bucket = src;
         if (subs && src > subs && (src - subs) <= MAX_OFFSET && !memcmp(src, subs, MIN_MATCH)) {
-            src += MIN_MATCH;
             const uint8_t *m = subs + MIN_MATCH;
             int len = MIN_MATCH;
+            src += MIN_MATCH;
             while (*src == *m && len < MAX_MATCH && src < top) {
                 src++; m++; len++;
             }
diff --git a/src/tinflate.c b/src/tinflate.c
index d719d80..1698d4c 100644
--- a/src/tinflate.c
+++ b/src/tinflate.c
@@ -500,7 +500,8 @@ static int tinf_inflate_block_data(TINF_DATA *d, TINF_TREE *lt, TINF_TREE *dt)
 
 /* inflate next byte from uncompressed block of data */
 static int tinf_inflate_uncompressed_block(TINF_DATA *d)
-{
+{    
+	unsigned char c;
     if (d->curlen == 0) {
         unsigned int length, invlength;
 
@@ -525,7 +526,7 @@ static int tinf_inflate_uncompressed_block(TINF_DATA *d)
         return TINF_DONE;
     }
 
-    unsigned char c = uzlib_get_byte(d);
+	c = uzlib_get_byte(d);
     TINF_PUT(d, c);
     return TINF_OK;
 }